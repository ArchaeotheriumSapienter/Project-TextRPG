"""
File: rpgameV3.py
----------------------------------------------------------------------
This is an RPG program where the player can fight various types of enemies. It has its own story line based
from the creator. The enemies also get harder as the player plays.

Milestone:
1. Prompt welcome message - done
2. Input Name - done
2. Finish introduction - done
3. Create character - done
4. Make character move, attack, defend - done
    a. make a set of moves that a player can do:
        - move done
        - attack - done
        - status - done
        - help - done
        - flee - done
        - leech - done
5. Make an enemy - done
6. Random occurence of enemy when player is walking - done
6. Make enemy fight the character - done
7. Do level up - done
8. Make a scripted enemy
9. continue storyline
"""
# character: for the players and enemies
# constants: for the various constants
# text_effect_and_exit_function: for effects

from functions_and_classes import character, constants, text_effect_and_exit_function

# putting the effects into a variable for easier readability
type_print_effect = text_effect_and_exit_function.type_print_effect
input_print_effect = text_effect_and_exit_function.input_print_effect
text_delay_via_time_sleep = text_effect_and_exit_function.text_delay_via_time_sleep


# =========================================================
# MAIN FUNCTION
# =========================================================


def main():
    """
    Main function used to execute the whole program of the rpgameV3
    :return: 
    """
    #  handler for the character parent class and the minimum value of each stats that a character can have
    p = character.Player()

    # name input to get the name of the player
    p.name = input_print_effect('Before we start, what is your name? ')

    # calling all of the common class enemy when the player walks with a one in third chance to encounter them
    # compiled into a dictionary for organization

    common_enemy_dict = {
        'deformed_mutated_human': character.DeformedMutatedHuman(),
        'mutated_human': character.MutatedHuman(),
        'lost_wanderer': character.LostWanderer(),
        'chaser': character.Chaser()
    }

    # welcome_message_and_introduction(p.name)

    while True:
        #  p.level_up()
        # p.double_damage_and_damage_generator()
        p.player_commands(common_enemy_dict)

    # first_chapter()


# =========================================================
# FUNCTION FROM MAIN
# =========================================================


def welcome_message_and_introduction(user_name):
    """
    Welcome message for the user to see and asks the user whether to start the game or not
    Return: user_name
    """
    type_print_effect("Welcome to the Journey.\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect('You are an individual that suddenly woke up without any recollection.\n')
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect('Now you must understand what happened before you came to this place.\n')
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)

    # Asks the user for an input and the input of the user is turned into a lowercase to clean data
    start_game = input_print_effect('Type y to start or n to end the game ').lower()

    # If argument with the user's choices, if n, it will exit the program, anything other than y or n will
    # be taken as a sign to end the game, and y will prompt to start the introduction function
    while start_game != '':
        if start_game == 'y':
            # starts the game by going into the introduction
            introduction(user_name)

            # to prevent looping of the while loop after introduction
            break

        elif start_game == 'n':
            print('')  # space for terminal
            type_print_effect('Thank you for taking the time to check out my first Python Project.\n')
            text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
            type_print_effect('This means a lot to me. Have a great day! :)')

            # ends the code
            text_effect_and_exit_function.system_exit()

        else:
            print('')  # space for terminal
            print('Invalid input. Please press the appropriate letter.')

            # Fencepost solution
            start_game = input_print_effect('Type y to start or n to end the game ').lower()


# def first_chapter():


# =========================================================
# HELPER FUNCTIONS
# =========================================================

#  TODO: kulang pa dito YUNG WEAPONS LAGYAN MO MAMAYA
def introduction(user_name):
    """
    Opening dialogue with Alicia, the first character that the player saw, she will guide the player to the dojo
    Pre-condition: Player starts the game
    Post-condition: Player has a name and is headed for the dojo
    """
    print('')  # For spacing from the start menu
    type_print_effect("Hey, wake up! Are you okay? Who are you? And what are you doing near my home!\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("Oh my, you have so many bruises! Let me tend your wounds and then let's talk.\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("I'm Alicia by the way, its a good thing I found you here,\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("there isn't any hospitals or clinic here for hundreds of kilometers.\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("The best bet you have right now is me, good thing I have a first aid kit.\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("I forgot to even ask! What's your name?\n")

    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("That's a nice name, " + user_name + "\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("There we go, I patched your wounds. The problem now is where would you go?\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("And do you remember how you got here? Or who you are?\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("Hey! What's that in your shoulder, I guess I missed a wound.\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("...\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("You're one of them!!! I can't believe it. How did you wind up here? In the middle of nowhere?\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("You're here to defeat " + constants.BOSS_NAME + "\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("But you can't! You'll get yourself killed!\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("But if you're one of them, I guess you're destined towards that goal? Destiny is so weird\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("I mean, who gets to decide what you should do? Is it the player? I guess not...\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("The player is only looking at the screen right now, just watching our whole conversation.\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("Anyway, since I can see that you're one of them, I believe you can still remember how to "
                      "fight?\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("Or how to use your power? I want to see how you release your power!\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("...\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("Don't you rememeber anything? Come on, just one move!\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("...\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("Oh my, if that's the case, I think you should go to the nearby dojo.\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("The sensei there would help you remember the once you've lost\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("Before you go! I'll give you this to defend yourself.\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("You've acquired a KNIFE.\n")  # TODO: add weapons in the future
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("It's no longer safe ever since we've left Earth.\n")
    text_delay_via_time_sleep(constants.NEXT_TEXT_DURATION)
    type_print_effect("Goodluck out there " + user_name + "\n")


# =========================================================
# NO NEED FOR EDITING
# =========================================================


if __name__ == '__main__':
    main()
